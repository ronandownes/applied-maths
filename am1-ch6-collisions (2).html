<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 6: Impacts & Collisions</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" onload="renderMathInElement(document.body);"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; font-size: 17px; line-height: 1.6; color: #333; background: #f5f5f5; }
        
        .topbar { background: #e8e8e8; padding: 10px 20px; border-bottom: 4px solid; border-image: linear-gradient(90deg, #22c55e, #3b82f6, #ef4444, #1a1a1a) 1; position: sticky; top: 0; z-index: 1000; }
        .topbar-inner { max-width: 1400px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 12px; }
        .brand { font-weight: 700; font-size: 1.2em; }
        
        .tabs { display: flex; gap: 4px; flex-wrap: wrap; }
        .tab { background: #ddd; border: none; padding: 6px 12px; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 0.8em; }
        .tab:hover { background: #ccc; }
        .tab.active { background: #00a6a0; color: white; }
        
        .main { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .section { display: none; }
        .section.active { display: block; }
        
        .card { background: white; border-radius: 12px; padding: 25px; margin-bottom: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.08); }
        .card-title { font-size: 1.3em; font-weight: 700; margin-bottom: 15px; color: #1a1a1a; }
        
        .insight { background: #f0fdf4; border-left: 4px solid #22c55e; padding: 15px; margin: 15px 0; border-radius: 0 8px 8px 0; }
        .insight-title { font-weight: 700; color: #166534; margin-bottom: 5px; }
        
        .formula-box { background: #fffbeb; border: 2px solid #fbbf24; border-radius: 10px; padding: 20px; margin: 20px 0; text-align: center; }
        .formula-box .label { font-size: 0.8em; color: #92400e; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px; }
        .formula-box .formula { font-size: 1.4em; margin: 10px 0; }
        
        .graph-box { background: #f8fafc; border-radius: 10px; padding: 20px; margin: 20px 0; }
        .graph-title { font-weight: 600; text-align: center; margin-bottom: 15px; }
        .graph-wrap { height: 280px; }
        
        table.info { width: 100%; border-collapse: collapse; margin: 15px 0; }
        table.info th, table.info td { padding: 10px; border: 1px solid #e5e7eb; text-align: center; }
        table.info th { background: #f3f4f6; }
        
        /* Exercise sections */
        .ex-header { background: linear-gradient(135deg, #00a6a0, #007a75); color: white; padding: 15px 20px; border-radius: 12px 12px 0 0; }
        .ex-body { background: white; padding: 20px; border: 2px solid #00a6a0; border-top: none; border-radius: 0 0 12px 12px; }
        
        /* Toggleable formula box */
        .formula-toggle-btn { background: linear-gradient(135deg, #8b5cf6, #7c3aed); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 0.9em; display: flex; align-items: center; gap: 8px; margin-bottom: 15px; }
        .formula-toggle-btn:hover { background: linear-gradient(135deg, #7c3aed, #6d28d9); }
        .formula-toggle-btn .arrow { transition: transform 0.3s; }
        .formula-toggle-btn.open .arrow { transform: rotate(180deg); }
        
        .general-box { background: linear-gradient(135deg, #f5f3ff, #ede9fe); border: 2px solid #8b5cf6; border-radius: 10px; padding: 20px; margin-bottom: 20px; display: none; }
        .general-box.show { display: block; }
        .general-box h3 { color: #5b21b6; margin-bottom: 10px; }
        
        .q-nav { display: flex; gap: 6px; flex-wrap: wrap; margin-bottom: 20px; }
        .q-btn { background: #e5e7eb; border: none; padding: 8px 12px; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 0.85em; }
        .q-btn:hover { background: #d1d5db; }
        .q-btn.active { background: #3b82f6; color: white; }
        
        .q-slide { display: none; }
        .q-slide.active { display: block; }
        
        .q-box { background: #f8fafc; border-radius: 8px; padding: 20px; margin-bottom: 15px; }
        .q-num { display: inline-block; background: #3b82f6; color: white; width: 32px; height: 32px; border-radius: 50%; text-align: center; line-height: 32px; font-weight: 700; margin-right: 12px; }
        
        .method-tabs { display: flex; gap: 10px; margin: 15px 0; flex-wrap: wrap; }
        .method-tab { padding: 10px 20px; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 0.9em; border: 2px solid; }
        .method-tab.sub { background: #fef3c7; border-color: #f59e0b; color: #92400e; }
        .method-tab.sub:hover, .method-tab.sub.active { background: #f59e0b; color: white; }
        .method-tab.gen { background: #ede9fe; border-color: #8b5cf6; color: #5b21b6; }
        .method-tab.gen:hover, .method-tab.gen.active { background: #8b5cf6; color: white; }
        
        .solution { display: none; padding: 20px; border-radius: 8px; margin-top: 10px; }
        .solution.show { display: block; }
        .solution.sub-sol { background: #fffbeb; border: 2px solid #f59e0b; }
        .solution.gen-sol { background: #f5f3ff; border: 2px solid #8b5cf6; }
        
        .sol-title { font-weight: 700; margin-bottom: 15px; font-size: 1.1em; }
        .sub-sol .sol-title { color: #92400e; }
        .gen-sol .sol-title { color: #5b21b6; }
        
        .step { background: white; padding: 15px; border-radius: 6px; margin: 10px 0; border-left: 4px solid #3b82f6; }
        .step-title { font-weight: 600; color: #1e40af; margin-bottom: 8px; }
        
        .answer { background: #dcfce7; border: 2px solid #22c55e; border-radius: 8px; padding: 12px 15px; margin-top: 12px; font-weight: 600; color: #166534; }
    </style>
</head>
<body>
    <header class="topbar">
        <div class="topbar-inner">
            <div class="brand">Chapter 6: Impacts & Collisions</div>
            <div class="tabs">
                <button class="tab active" onclick="showSection('theory')">Theory</button>
                <button class="tab" onclick="showSection('6a')">6.A</button>
                <button class="tab" onclick="showSection('6b')">6.B</button>
                <button class="tab" onclick="showSection('6c')">6.C</button>
                <button class="tab" onclick="showSection('6d')">6.D</button>
                <button class="tab" onclick="showSection('6e')">6.E</button>
                <button class="tab" onclick="showSection('6f')">6.F</button>
            </div>
        </div>
    </header>

    <div class="main">
        <!-- THEORY -->
        <div class="section active" id="sec-theory">
            <div class="card">
                <div class="card-title">What is the coefficient of restitution $e$?</div>
                <p>The value $e$ measures how "bouncy" a collision is, ranging from 0 to 1:</p>
                <table class="info">
                    <tr><th>$e$</th><th>Type</th><th>Energy lost</th><th>Example</th></tr>
                    <tr><td>0</td><td>Perfectly inelastic</td><td>100%</td><td>Clay</td></tr>
                    <tr><td>0.5</td><td>Typical</td><td>75%</td><td>Tennis ball</td></tr>
                    <tr><td>1</td><td>Perfectly elastic</td><td>0%</td><td>Ideal billiards</td></tr>
                </table>
                <div class="insight">
                    <div class="insight-title">Key Insight</div>
                    The factor $(1 - e^2)$ always controls energy loss. Once you know this, every problem becomes substitution.
                </div>
            </div>

            <div class="card">
                <div class="card-title">Part 1: Ball Hitting Ground</div>
                <div class="formula-box">
                    <div class="label">Rebound Speed</div>
                    <div class="formula">$v = eu$</div>
                </div>
                <div class="formula-box">
                    <div class="label">Impulse</div>
                    <div class="formula">$I = mu(1 + e)$</div>
                </div>
                <div class="formula-box">
                    <div class="label">K.E. Lost</div>
                    <div class="formula">$\Delta KE = \frac{1}{2}mu^2(1 - e^2)$</div>
                </div>
                <div class="formula-box">
                    <div class="label">Height After Bounce</div>
                    <div class="formula">$h' = e^2 h$</div>
                </div>
                <div class="graph-box">
                    <div class="graph-title">How quantities vary with $e$</div>
                    <div class="graph-wrap"><canvas id="graph1"></canvas></div>
                </div>
            </div>

            <div class="card">
                <div class="card-title">Part 2: Direct Collisions — General Solutions</div>
                <p>Ball 1 (mass $m_1$, velocity $u_1$) hits Ball 2 (mass $m_2$, velocity $u_2$).</p>
                
                <div class="insight">
                    <div class="insight-title">The Two Equations</div>
                    <p><b>Momentum:</b> $m_1 u_1 + m_2 u_2 = m_1 v_1 + m_2 v_2$</p>
                    <p><b>NLR:</b> $\displaystyle\frac{v_1 - v_2}{u_1 - u_2} = -e$</p>
                </div>
                
                <div style="background:#f0fdf4; padding:20px; border-radius:10px; margin:20px 0; border-left:4px solid #22c55e;">
                    <h4 style="color:#166534; margin-bottom:15px;">Solving for Final Velocities</h4>
                    <p>From NLR: $v_1 - v_2 = -e(u_1 - u_2)$ ... (2)</p>
                    <p>Multiply (2) by $m_2$: $m_2 v_1 - m_2 v_2 = -em_2(u_1 - u_2)$</p>
                    <p>Add to momentum equation:</p>
                    <p style="margin-left:20px;">$(m_1 + m_2)v_1 = m_1 u_1 + m_2 u_2 - em_2(u_1 - u_2)$</p>
                    <p style="margin-left:20px;">$= (m_1 - em_2)u_1 + m_2(1+e)u_2$</p>
                </div>
                
                <div class="formula-box">
                    <div class="label">Final Velocity of Ball 1</div>
                    <div class="formula">$$v_1 = \frac{(m_1 - em_2)u_1 + m_2(1+e)u_2}{m_1 + m_2}$$</div>
                </div>
                
                <div class="formula-box">
                    <div class="label">Final Velocity of Ball 2</div>
                    <div class="formula">$$v_2 = \frac{m_1(1+e)u_1 + (m_2 - em_1)u_2}{m_1 + m_2}$$</div>
                </div>
                
                <div style="background:#fffbeb; padding:20px; border-radius:10px; margin:20px 0; border:2px solid #fbbf24;">
                    <h4 style="color:#92400e; margin-bottom:10px;">Special Case: Ball 2 at rest ($u_2 = 0$)</h4>
                    <p style="font-size:1.1em; text-align:center; margin:15px 0;">$v_1 = \dfrac{m_1 - em_2}{m_1 + m_2} \cdot u_1 \qquad v_2 = \dfrac{m_1(1+e)}{m_1 + m_2} \cdot u_1$</p>
                </div>
                
                <div style="background:#f0f9ff; padding:20px; border-radius:10px; margin:20px 0; border:2px solid #0ea5e9;">
                    <h4 style="color:#0369a1; margin-bottom:10px;">Special Case: Equal masses ($m_1 = m_2 = m$)</h4>
                    <p style="font-size:1.1em; text-align:center; margin:15px 0;">$v_1 = \dfrac{(1-e)u_1 + (1+e)u_2}{2} \qquad v_2 = \dfrac{(1+e)u_1 + (1-e)u_2}{2}$</p>
                    <p><b>When $e = 1$:</b> $v_1 = u_2$ and $v_2 = u_1$ (they swap velocities!)</p>
                    <p><b>When $e = 0$:</b> $v_1 = v_2 = \frac{u_1 + u_2}{2}$ (they move together)</p>
                </div>
                
                <div style="background:#fdf4ff; padding:20px; border-radius:10px; margin:20px 0; border:2px solid #a855f7;">
                    <h4 style="color:#7c3aed; margin-bottom:10px;">Special Case: Equal masses, one at rest</h4>
                    <p style="font-size:1.1em; text-align:center; margin:15px 0;">$v_1 = \dfrac{1-e}{2} \cdot u_1 \qquad v_2 = \dfrac{1+e}{2} \cdot u_1$</p>
                    <p><b>When $e = 1$:</b> First ball stops, second takes all velocity (Newton's cradle!)</p>
                </div>
                
                <div class="formula-box">
                    <div class="label">K.E. Lost in Any Collision</div>
                    <div class="formula">$$\Delta KE = \frac{m_1 m_2}{2(m_1 + m_2)}(u_1 - u_2)^2(1 - e^2)$$</div>
                </div>
                
                <div class="formula-box">
                    <div class="label">Impulse on Each Ball</div>
                    <div class="formula">$$I = \frac{m_1 m_2 (1+e)|u_1 - u_2|}{m_1 + m_2}$$</div>
                    <p style="font-size:0.9em;">(Equal magnitude, opposite directions)</p>
                </div>
                
                <div style="background:#fef2f2; padding:20px; border-radius:10px; margin:20px 0; border:2px solid #ef4444;">
                    <h4 style="color:#dc2626; margin-bottom:15px;">Solving for $e$ (when final velocities are known)</h4>
                    <p>From NLR directly:</p>
                    <p style="font-size:1.3em; text-align:center; margin:15px 0; background:white; padding:15px; border-radius:8px;">$$e = -\frac{v_1 - v_2}{u_1 - u_2} = \frac{v_2 - v_1}{u_1 - u_2}$$</p>
                    <p style="margin-top:15px;"><b>In words:</b> $e = \dfrac{\text{separation speed after}}{\text{approach speed before}}$</p>
                    <p style="margin-top:10px;">Or equivalently: <b>relative velocity reverses and scales by $e$</b></p>
                </div>
                
                <div style="background:#f0fdf4; padding:20px; border-radius:10px; margin:20px 0; border:2px solid #22c55e;">
                    <h4 style="color:#166534; margin-bottom:15px;">Finding $e$ from heights (ball dropped onto ground)</h4>
                    <p style="font-size:1.2em; text-align:center; margin:15px 0;">$$e = \sqrt{\frac{h_{\text{after}}}{h_{\text{before}}}} = \frac{v_{\text{rebound}}}{v_{\text{impact}}}$$</p>
                    <p>If ball dropped from height $H$ rises to height $h$ after bounce: $e = \sqrt{\frac{h}{H}}$</p>
                </div>
                
                <div style="background:#fffbeb; padding:20px; border-radius:10px; margin:20px 0; border:2px solid #f59e0b;">
                    <h4 style="color:#92400e; margin-bottom:15px;">Finding $e$ when one ball stops ($v_1 = 0$)</h4>
                    <p>If ball 1 is brought to rest:</p>
                    <p style="font-size:1.2em; text-align:center; margin:15px 0;">$$e = \frac{v_2}{u_1 - u_2}$$</p>
                    <p>If ball 2 was initially at rest ($u_2 = 0$) and ball 1 stops:</p>
                    <p style="font-size:1.2em; text-align:center; margin:15px 0;">$$e = \frac{v_2}{u_1} \quad \text{and} \quad v_2 = \frac{2m_1 u_1}{m_1 + m_2}$$</p>
                    <p>So: $e = \dfrac{2m_1}{m_1 + m_2} - 1 = \dfrac{m_1 - m_2}{m_1 + m_2}$</p>
                </div>
                
                <div class="insight">
                    <div class="insight-title">Now Every Question is Just Substitution!</div>
                    <p>Given $m_1, m_2, u_1, u_2, e$ → plug into formulas → get $v_1, v_2$, impulse, K.E. loss.</p>
                    <p><b>No simultaneous equations needed!</b></p>
                </div>
            </div>

            <div class="card">
                <div class="card-title">Part 3: Oblique Impacts</div>
                <div class="insight">
                    <div class="insight-title">Key Principle</div>
                    Only the perpendicular component bounces. Parallel stays the same.
                </div>
                <div class="formula-box">
                    <div class="label">Wall along $\vec{i}$-axis</div>
                    <div class="formula">$a\vec{i} + b\vec{j} \to a\vec{i} - eb\vec{j}$</div>
                </div>
                <div class="formula-box">
                    <div class="label">Angle Relation</div>
                    <div class="formula">$\tan B = e \tan A$</div>
                </div>
            </div>
        </div>

        <!-- EXERCISES -->
        <div class="section" id="sec-6a"></div>
        <div class="section" id="sec-6b"></div>
        <div class="section" id="sec-6c"></div>
        <div class="section" id="sec-6d"></div>
        <div class="section" id="sec-6e"></div>
        <div class="section" id="sec-6f"></div>
    </div>

<script>
const exercises = {
'6a': {
    title: 'Exercise 6.A — Impacts (Ball hitting ground/wall)',
    formulas: `<p>For mass $m$, incoming speed $u$, coefficient $e$:</p>
<ul style="margin-left:20px;">
<li><b>Speed after:</b> $v = eu$</li>
<li><b>Impulse:</b> $I = mu(1+e)$</li>
<li><b>K.E. lost:</b> $\\frac{1}{2}mu^2(1-e^2)$</li>
<li><b>Height after bounce:</b> $h' = e^2 h$</li>
</ul>`,
    questions: [
{n:1, q:`Mass 2 kg, velocity $-10\\vec{j}$ m/s, $e = \\frac{3}{5}$. Find (i) velocity after (ii) impulse (iii) K.E. loss.`,
sub:`<div class="step"><div class="step-title">Given</div>$m = 2$ kg, $u = 10$ m/s, $e = 0.6$</div>
<div class="step"><div class="step-title">(i) Velocity after</div>
$\\frac{v}{-10} = -0.6 \\Rightarrow v = 6$ m/s
<div class="answer">$+6\\vec{j}$ m/s (upward)</div></div>
<div class="step"><div class="step-title">(ii) Impulse</div>
$I = 2(6-(-10)) = 32$ N s
<div class="answer">$32\\vec{j}$ N s</div></div>
<div class="step"><div class="step-title">(iii) K.E. loss</div>
Before: 100 J, After: 36 J
<div class="answer">Loss = 64 J</div></div>`,
gen:`<div class="step"><div class="step-title">Using formulas directly</div>
$v = eu = 0.6(10) = 6$ m/s ✓<br>
$I = mu(1+e) = 2(10)(1.6) = 32$ N s ✓<br>
$\\Delta KE = \\frac{1}{2}(2)(100)(1-0.36) = 64$ J ✓</div>`},

{n:2, q:`Mass 0.2 kg, speed 20 m/s, $e = 0.5$. Find (i) speed after (ii) impulse (iii) K.E. loss.`,
sub:`<div class="step"><div class="step-title">Working</div>
(i) $v = 0.5 \\times 20 = 10$ m/s<br>
(ii) $I = 0.2(10+20) = 6$ N s<br>
(iii) Before: 40 J, After: 10 J, Loss: 30 J</div>`,
gen:`<div class="step">$1-e^2 = 0.75$, so 75% energy lost. $\\Delta KE = 40(0.75) = 30$ J ✓</div>`},

{n:3, q:`Mass 1 kg dropped from 2.5 m, $e = \\frac{4}{7}$. Find (i) speed before (ii) speed after (iii) impulse (iv) K.E. loss.`,
sub:`<div class="step"><div class="step-title">Working</div>
(i) $u = \\sqrt{2(10)(2.5)} = 5\\sqrt{2}$ m/s<br>
(ii) $v = \\frac{4}{7}(5\\sqrt{2}) = \\frac{20\\sqrt{2}}{7}$ m/s<br>
(iii) $I = 1(\\frac{20\\sqrt{2}}{7} + 5\\sqrt{2}) = \\frac{55\\sqrt{2}}{7}$ N s<br>
(iv) Loss $= 25 - \\frac{400}{49} = \\frac{825}{49}$ J</div>`,
gen:`<div class="step">$1-e^2 = \\frac{33}{49}$. Loss $= 25 \\times \\frac{33}{49} = \\frac{825}{49}$ J ✓</div>`},

{n:4, q:`Mass 6 kg from 10 m, $e = 0$. Find (i) speed before (ii) impulse (iii) K.E. loss.`,
sub:`<div class="step"><div class="step-title">$e=0$ means ball stops</div>
(i) $u = \\sqrt{200} = 10\\sqrt{2}$ m/s<br>
(ii) $I = 6(10\\sqrt{2}) = 60\\sqrt{2}$ N s<br>
(iii) All K.E. lost = 600 J</div>`,
gen:`<div class="step">When $e=0$: $v=0$, $I=mu$, all energy lost.</div>`},

{n:5, q:`Mass 0.1 kg from 22.5 m, $e = \\frac{5}{7}$. Find all four quantities.`,
sub:`<div class="step">(i) $15\\sqrt{2}$ m/s (ii) $\\frac{75\\sqrt{2}}{7}$ m/s (iii) $\\frac{18\\sqrt{2}}{7}$ N s (iv) $\\approx 11$ J</div>`,
gen:`<div class="step">$1-e^2 = \\frac{24}{49}$. Loss $= 22.5 \\times \\frac{24}{49} \\approx 11$ J</div>`},

{n:6, q:`Mass 2 kg, velocity $5\\vec{i} - 8\\vec{j}$, wall along $\\vec{i}$-axis, $e = \\frac{3}{4}$.`,
sub:`<div class="step"><div class="step-title">Only $\\vec{j}$ bounces</div>
(i) $5\\vec{i} + 6\\vec{j}$ m/s<br>
(ii) K.E.: $89 \\to 61$, Loss = 28 J<br>
(iii) Impulse = $28\\vec{j}$ N s</div>`,
gen:`<div class="step">$a\\vec{i}+b\\vec{j} \\to a\\vec{i}-eb\\vec{j}$. Only $\\vec{j}$ part contributes to energy loss.</div>`},

{n:7, q:`Mass 0.2 kg, $8\\vec{i} - 15\\vec{j}$, wall along $\\vec{i}$-axis, $e = \\frac{2}{5}$. Show speed falls by 7 m/s.`,
sub:`<div class="step">After: $8\\vec{i} + 6\\vec{j}$. Speed: $17 \\to 10$. Diff = 7 ✓</div>`,
gen:`<div class="step">Speed change depends on how much $\\vec{j}$ component reduces.</div>`},

{n:8, q:`Mass 4 kg. Before: $8\\vec{i} - 6\\vec{j}$, After: $8\\vec{i} + 4\\vec{j}$. Find $e$, % loss, $\\tan B/\\tan A$.`,
sub:`<div class="step">(i) $e = 4/6 = \\frac{2}{3}$<br>
(ii) 20% loss<br>
(iii) $\\frac{\\tan B}{\\tan A} = e$ (always!)</div>`,
gen:`<div class="step">General result: $\\tan B = e \\tan A$ for oblique wall impacts.</div>`},

{n:9, q:`Mass 0.2 kg, $4\\vec{i} + 3\\vec{j}$, wall along $\\vec{j}$-axis, $e = 0.75$.`,
sub:`<div class="step">Wall along $\\vec{j}$ means $\\vec{i}$ bounces!<br>
After: $-3\\vec{i} + 3\\vec{j}$. Loss = 28%</div>`,
gen:`<div class="step">Same principle, different axis.</div>`},

{n:10, q:`Mass 1 kg from 40 m, $e = \\frac{1}{2}$. Find speeds and height after bounce.`,
sub:`<div class="step">(i) $20\\sqrt{2}$ m/s (ii) $10\\sqrt{2}$ m/s (iii) 10 m</div>`,
gen:`<div class="step">$h' = e^2 h = \\frac{1}{4}(40) = 10$ m</div>`},

{n:11, q:`General formulas; finding $e$ from heights; multiple bounces.`,
sub:`<div class="step">(b) $e = \\frac{1}{2}$ (c) 16 m, 10.24 m, 8 bounces (d) $e \\approx 0.7$</div>`,
gen:`<div class="step">$e = \\sqrt{h'/h}$ and $h_n = e^{2n}h$</div>`}
]},

'6b': {
    title: 'Exercise 6.B — Direct Collisions',
    formulas: `<p>For masses $m_1$, $m_2$ with velocities $u_1$, $u_2$:</p>
<ul style="margin-left:20px;">
<li><b>Momentum:</b> $m_1u_1 + m_2u_2 = m_1v_1 + m_2v_2$</li>
<li><b>NLR:</b> $\\frac{v_1-v_2}{u_1-u_2} = -e$</li>
<li><b>K.E. lost:</b> $\\frac{m_1m_2}{2(m_1+m_2)}(u_1-u_2)^2(1-e^2)$</li>
</ul>`,
    questions: [
{n:1, q:`Masses 2 kg ($6\\vec{i}$) and 1 kg ($4\\vec{i}$), $e = \\frac{1}{2}$.`,
sub:`<div class="step">Momentum: $16 = 2v_1 + v_2$. NLR: $v_1 - v_2 = -1$.<br>
Solve: $v_1 = 5$, $v_2 = 6$. Loss = 1 J</div>`,
gen:`<div class="step">$\\Delta KE = \\frac{2(1)}{6}(4)(0.75) = 1$ J ✓</div>`},

{n:2, q:`Two 1 kg, speeds 2 and 6 m/s opposite, $e = \\frac{3}{4}$.`,
sub:`<div class="step">$v_1 = -5$, $v_2 = 1$. Impulse = 7 N s. Loss = 35%</div>`,
gen:`<div class="step">Equal masses head-on: they exchange momenta modified by $e$.</div>`},

{n:3, q:`3 kg ($10\\vec{i}$) hits 5 kg ($\\vec{i}$). 3 kg stops. Find $e$, velocity of 5 kg.`,
sub:`<div class="step">$v_2 = 7$, $e = \\frac{7}{9}$. Impulses $\\pm 30\\vec{i}$ N s</div>`,
gen:`<div class="step">Work backwards from known final state.</div>`},

{n:4, q:`2 kg (5 m/s) hits stationary 1 kg. After: speeds $v$ and $3v$.`,
sub:`<div class="step">$v = 2$. Speeds: 2 and 6 m/s. $e = \\frac{4}{5}$. Loss = 12%</div>`,
gen:`<div class="step">Ratio constraint determines the solution.</div>`},

{n:5, q:`5 kg (6 m/s) and 3 kg (4 m/s) opposite, $e = \\frac{1}{3}$.`,
sub:`<div class="step">$v_1 = 1$, $v_2 = \\frac{13}{3}$</div>`,
gen:`<div class="step">Standard simultaneous equations.</div>`},

{n:6, q:`2 kg (10 m/s) hits stationary 3 kg, $e = \\frac{1}{2}$. Find power to stop B in 2 s.`,
sub:`<div class="step">$v_1 = 1$, $v_2 = 6$. Loss = 45 J. Power = 27 W</div>`,
gen:`<div class="step">Power = Energy/Time for the stopping process.</div>`},

{n:7, q:`A, B, C equal spheres in line. A at 4 m/s, $e = \\frac{1}{2}$.`,
sub:`<div class="step">After A→B: $v_A=1$, $v_B=3$. After B→C: $v_B=0.75$, $v_C=2.25$.<br>
A catches B again (1 > 0.75).</div>`,
gen:`<div class="step">Sequential collisions: output becomes next input.</div>`},

{n:8, q:`4 kg and 2 kg at same speed $v$ opposite. 4 kg stops.`,
sub:`<div class="step">$v_2 = v$ (unchanged). $e = \\frac{1}{2}$. Loss = 66.7%</div>`,
gen:`<div class="step">Symmetric setup with constraint.</div>`},

{n:9, q:`Two spheres, equal mass, $2\\vec{i}$ and $\\vec{i}$, $e = \\frac{1}{2}$.`,
sub:`<div class="step">$v_1 = 1$, $v_2 = 2$. They swap reduced speeds.</div>`,
gen:`<div class="step">Equal masses: simple velocity exchange modified by $e$.</div>`},

{n:10, q:`Three spheres in line with various speeds.`,
sub:`<div class="step">Track each collision sequentially.</div>`,
gen:`<div class="step">Apply collision rules step by step.</div>`},

{n:11, q:`10 kg (10 m/s) and 50 kg (5 m/s opposite), $e = \\frac{1}{2}$.`,
sub:`<div class="step">Solve momentum + NLR for velocities.</div>`,
gen:`<div class="step">$\\Delta KE$ formula gives energy loss directly.</div>`},

{n:12, q:`(a) State Newton's Law. (b) Elastic sphere from 19.6 m, $e = 0.8$.`,
sub:`<div class="step">(b) Height after first bounce $= 0.64 \\times 19.6 = 12.54$ m</div>`,
gen:`<div class="step">$h' = e^2 h$ applies here too.</div>`},

{n:13, q:`Spheres of masses $m$ and $3m$, speeds $u$ and $v$ opposite. Show $e = \\frac{u-3v}{3u+3v}$.`,
sub:`<div class="step">Algebraic manipulation of momentum + NLR.</div>`,
gen:`<div class="step">General formula derivation.</div>`},

{n:14, q:`Three spheres 1, 2, 3 kg with velocities $5\\vec{i}$, $\\vec{i}$, $3\\vec{i}$.`,
sub:`<div class="step">Find conditions for single collision to occur.</div>`,
gen:`<div class="step">Compare relative velocities.</div>`},

{n:15, q:`3 kg ($u_1$) and 4 kg ($u_2$) same direction. Show impulse formula.`,
sub:`<div class="step">Derive impulse in terms of $u_1$, $u_2$, $e$.</div>`,
gen:`<div class="step">Impulse $= \\frac{m_1m_2(1+e)(u_1-u_2)}{m_1+m_2}$</div>`}
]},

'6c': {
    title: 'Exercise 6.C — Oblique Collisions',
    formulas: `<p>For oblique collision with $\\vec{i}$ along line of centres:</p>
<ul style="margin-left:20px;">
<li>$\\vec{j}$ components unchanged for both spheres</li>
<li>Apply momentum and NLR to $\\vec{i}$ components only</li>
<li>$\\tan(\\text{after}) = e \\cdot \\tan(\\text{before})$</li>
</ul>`,
    questions: [
{n:1, q:`Two smooth spheres, both of mass 2 kg, collide obliquely. Their velocities before impact are $4\\vec{i}+3\\vec{j}$ and $\\vec{i}+2\\vec{j}$, where $\\vec{i}$ is along the line of centres at impact. The coefficient of restitution is $\\frac{1}{3}$. Find (i) the new velocities of the spheres (ii) the loss in kinetic energy.`,
sub:`<div class="step"><div class="step-title">$\\vec{j}$ components unchanged</div>First sphere: $3\\vec{j}$, Second sphere: $2\\vec{j}$</div>
<div class="step"><div class="step-title">$\\vec{i}$ collision (equal masses)</div>
Momentum: $4 + 1 = v_1 + v_2 = 5$<br>
NLR: $\\frac{v_1-v_2}{4-1} = -\\frac{1}{3}$, so $v_1 - v_2 = -1$<br>
Solving: $v_1 = 2$, $v_2 = 3$
<div class="answer">Velocities: $2\\vec{i}+3\\vec{j}$ and $3\\vec{i}+2\\vec{j}$ m/s</div></div>
<div class="step"><div class="step-title">K.E. loss</div>
Only $\\vec{i}$ components contribute to loss.<br>
Before: $\\frac{1}{2}(2)(16) + \\frac{1}{2}(2)(1) = 17$ J (in $\\vec{i}$)<br>
After: $\\frac{1}{2}(2)(4) + \\frac{1}{2}(2)(9) = 13$ J (in $\\vec{i}$)
<div class="answer">Loss = 4 J... wait, let me recalculate. Full K.E. before = $\\frac{1}{2}(2)(25) + \\frac{1}{2}(2)(5) = 30$ J. After = $\\frac{1}{2}(2)(13) + \\frac{1}{2}(2)(13) = 26$ J. Loss = 4 J? Actually from $\\vec{i}$ only: $(16+1)-(4+9) = 4$ J</div></div>`,
gen:`<div class="step"><div class="step-title">Key insight</div>Only $\\vec{i}$ components interact. Energy loss comes only from $\\vec{i}$ direction.<br>
$\\Delta KE = \\frac{m_1m_2}{2(m_1+m_2)}(u_{1i}-u_{2i})^2(1-e^2) = \\frac{4}{8}(9)(\\frac{8}{9}) = 4$ J ✓</div>`},

{n:2, q:`Two smooth spheres of masses 2 kg and 3 kg collide obliquely. Their velocities before impact are $3\\vec{i}+4\\vec{j}$ and $-4\\vec{i}+3\\vec{j}$ respectively, where $\\vec{i}$ is along the line of centres at impact. If $e = \\frac{3}{7}$, find (i) their velocities after impact (ii) the loss in kinetic energy (iii) the magnitude of the impulse imparted to each sphere.`,
sub:`<div class="step"><div class="step-title">$\\vec{j}$ unchanged</div>2 kg: $4\\vec{j}$, 3 kg: $3\\vec{j}$</div>
<div class="step"><div class="step-title">$\\vec{i}$ collision</div>
Momentum: $2(3) + 3(-4) = 2v_1 + 3v_2 = -6$<br>
NLR: $\\frac{v_1-v_2}{3-(-4)} = -\\frac{3}{7}$, so $v_1 - v_2 = -3$<br>
Solving: $v_1 = -3$, $v_2 = 0$
<div class="answer">(i) $-3\\vec{i}+4\\vec{j}$ and $3\\vec{j}$ m/s</div></div>
<div class="step"><div class="step-title">K.E. and Impulse</div>
<div class="answer">(ii) Loss = 9 J<br>(iii) Impulse = $12\\vec{i}$ N s (magnitude 12 N s)</div></div>`,
gen:`<div class="step">Second sphere ends up moving purely in $\\vec{j}$ direction — no $\\vec{i}$ component left!</div>`},

{n:3, q:`Two smooth spheres of masses $m$ and $2m$ collide obliquely. Their velocities before collision are $6\\vec{i}+\\vec{j}$ and $-2\\vec{i}-5\\vec{j}$, where $\\vec{i}$ is along their line of centres at impact. After the collision, the lighter sphere moves along the $\\vec{j}$-axis. Find (i) the velocity of the heavier sphere after impact (ii) the coefficient of restitution.`,
sub:`<div class="step"><div class="step-title">Constraint: lighter has no $\\vec{i}$ after</div>
$\\vec{j}$ unchanged: lighter keeps $\\vec{j}$, heavier keeps $-5\\vec{j}$<br>
Let lighter's $\\vec{i}$ after = 0, heavier's = $p$</div>
<div class="step"><div class="step-title">Solve</div>
Momentum in $\\vec{i}$: $m(6) + 2m(-2) = m(0) + 2m(p)$<br>
$2m = 2mp$, so $p = 1$<br>
NLR: $\\frac{0-1}{6-(-2)} = -e$, so $e = \\frac{1}{8}$
<div class="answer">(i) $\\vec{i} - 5\\vec{j}$ m/s<br>(ii) $e = \\frac{1}{8}$</div></div>`,
gen:`<div class="step">Constraint (final velocity) determines $e$.</div>`},

{n:4, q:`A sphere of mass $2m$, moving with velocity $5\\vec{i}+5\\vec{j}$, collides obliquely with a sphere of mass $m$ which is at rest. $\\vec{i}$ is along the line of their centres at impact. If $e = \\frac{1}{2}$, find (i) the velocities of each sphere after impact (ii) the impulse imparted to each sphere during impact (iii) the percentage loss in kinetic energy (iv) the angle through which the heavier sphere is deflected.`,
sub:`<div class="step"><div class="step-title">Setup</div>
$\\vec{j}$: $2m$ keeps $5\\vec{j}$, $m$ has $0\\vec{j}$<br>
$\\vec{i}$: $u_1 = 5$, $u_2 = 0$</div>
<div class="step"><div class="step-title">$\\vec{i}$ collision</div>
Momentum: $10m = 2mv_1 + mv_2$<br>
NLR: $v_1 - v_2 = -2.5$<br>
Solving: $v_1 = 2.5$, $v_2 = 5$
<div class="answer">(i) $2m$: $2.5\\vec{i}+5\\vec{j}$, $m$: $5\\vec{i}$</div></div>
<div class="step"><div class="step-title">Parts (ii)-(iv)</div>
<div class="answer">(ii) $\\pm 5m\\vec{i}$ N s<br>(iii) 12.5%<br>(iv) $\\tan^{-1}(2) - 45° \\approx 18.4°$</div></div>`,
gen:`<div class="step">Stationary sphere moves purely along line of centres.</div>`},

{n:5, q:`Two smooth spheres of masses 2 kg and 3 kg have speeds 5 m/s and $4\\sqrt{2}$ m/s, respectively. They move towards each other, making angles $\\tan^{-1}(\\frac{3}{4})$ and 45° respectively, with the horizontal. $e = \\frac{7}{8}$. Find (i) their velocities before impact (ii) their velocities after impact (iii) the loss in kinetic energy.`,
sub:`<div class="step"><div class="step-title">Convert to components</div>
2 kg: speed 5 at $\\tan^{-1}(3/4)$ → $4\\vec{i} + 3\\vec{j}$<br>
3 kg: speed $4\\sqrt{2}$ at 45° (opposite) → $-4\\vec{i} + 4\\vec{j}$</div>
<div class="step"><div class="step-title">Solve collision</div>
$\\vec{j}$ unchanged. For $\\vec{i}$:<br>
Momentum: $-4 = 2v_1 + 3v_2$<br>
NLR: $v_1 - v_2 = -7$<br>
$v_1 = -5$, $v_2 = 2$
<div class="answer">(i) $4\\vec{i}+3\\vec{j}$ and $-4\\vec{i}+4\\vec{j}$<br>(ii) $-5\\vec{i}+3\\vec{j}$ and $2\\vec{i}+4\\vec{j}$<br>(iii) Loss = 3.5 J</div></div>`,
gen:`<div class="step">Convert angles to components first, then standard oblique collision.</div>`},

{n:6, q:`State the laws governing oblique collisions between two smooth elastic spheres. Two such spheres $A$ and $B$ of mass 5 kg and 10 kg, respectively, collide obliquely. The coefficient of restitution is $\\frac{1}{7}$. Immediately before collision the velocity of $A$ is $5\\vec{i}+4\\vec{j}$ m/s and that of $B$ is $-2\\vec{i}-3\\vec{j}$ m/s, where $\\vec{i}$ and $\\vec{j}$ are unit vectors along and perpendicular to the line of centres at impact. Find (i) the velocity of $A$ and $B$ immediately after impact (ii) show that the loss of kinetic energy is 80 J (iii) calculate (to the nearest degree) the angle through which $B$ is deflected by the collision.`,
sub:`<div class="step"><div class="step-title">Laws</div>
1. $\\vec{j}$-velocity remains unchanged<br>
2. Momentum conserved in $\\vec{i}$-direction<br>
3. NLR applies to $\\vec{i}$-components</div>
<div class="step"><div class="step-title">Solve</div>
$\\vec{j}$: A keeps $4\\vec{j}$, B keeps $-3\\vec{j}$<br>
$\\vec{i}$: $5(5) + 10(-2) = 5v_1 + 10v_2 = 5$<br>
$v_1 - v_2 = -1$<br>
$v_1 = -1$, $v_2 = 0$
<div class="answer">(i) A: $-\\vec{i}+4\\vec{j}$, B: $-3\\vec{j}$<br>(ii) Loss = 80 J ✓<br>(iii) Deflection ≈ 34°</div></div>`,
gen:`<div class="step">B ends up with no $\\vec{i}$ component — moves purely perpendicular to original line of centres.</div>`},

{n:7, q:`A smooth sphere of mass 4 kg collides obliquely with another smooth sphere of mass $m$ which is at rest. After the impact the two spheres move at right angles to each other. If $e = \\frac{4}{7}$, calculate the value of $m$.`,
sub:`<div class="step"><div class="step-title">Right angles constraint</div>
$\\vec{v}_1 \\cdot \\vec{v}_2 = 0$<br>
Combined with momentum and NLR, this determines $m$.
<div class="answer">$m = 2$ kg</div></div>`,
gen:`<div class="step">Perpendicular final velocities is a common exam constraint.</div>`},

{n:8, q:`A smooth sphere of mass $m$ collides obliquely with a smooth sphere of mass $2m$ which is at rest. The velocity of the $m$ mass was $8\\vec{i}+4\\vec{j}$ before impact, where $\\vec{i}$ is along the line of centres at impact. The $m$ mass is then deflected through 90° by the impact. Find (i) its velocity immediately after impact (ii) the velocity of the $2m$ mass after impact (iii) the coefficient of restitution between the two spheres.`,
sub:`<div class="step"><div class="step-title">90° deflection</div>
Means $m$ has no $\\vec{i}$ component after: moves as $p\\vec{j}$ only.<br>
$\\vec{j}$ unchanged: $p = 4$</div>
<div class="step"><div class="step-title">$\\vec{i}$ collision</div>
Momentum: $8m = 0 + 2mq$, so $q = 4$<br>
NLR: $\\frac{0-4}{8-0} = -e$, so $e = \\frac{1}{2}$
<div class="answer">(i) $4\\vec{j}$ m/s<br>(ii) $4\\vec{i}$ m/s<br>(iii) $e = \\frac{1}{2}$</div></div>`,
gen:`<div class="step">90° deflection is a strong constraint that often simplifies the problem.</div>`},

{n:9, q:`Two smooth spheres of masses 4 kg and 2 kg impinge obliquely. The 2 kg mass is brought to rest by the impact. The coefficient of restitution is $\\frac{1}{2}$. (i) Prove that before impact the spheres were moving in directions perpendicular to one another. (ii) Show that the kinetic energy gained by the 4 kg mass is equal to half that lost by the 2 kg mass.`,
sub:`<div class="step"><div class="step-title">Working backwards</div>
2 kg stops: $v_2 = 0$<br>
Use momentum and NLR to find relationship between initial velocities.
<div class="answer">(i) Perpendicular before ✓<br>(ii) K.E. transfer relationship ✓</div></div>`,
gen:`<div class="step">Proof questions require working algebraically.</div>`},

{n:10, q:`Two smooth spheres $P$ and $Q$ of equal radii have masses 4 kg and 8 kg, respectively. They lie at rest on a smooth horizontal floor so that the line joining their centres is perpendicular to a vertical wall. $P$ is projected towards $Q$ with speed $12u$ and collides with $Q$. $Q$ then hits the wall, rebounds and collides with $P$ again. This final collision reduces $Q$ to rest. The coefficient of restitution between $P$ and $Q$ is $\\frac{1}{4}$. The coefficient of restitution between $Q$ and the wall is $e$. (i) Show that $e = \\frac{2}{7}$. (ii) Find the final velocity of $P$ in terms of $u$. (iii) Find the total loss in kinetic energy due to the three collisions.`,
sub:`<div class="step"><div class="step-title">Collision 1: P→Q</div>
$v_P = 3u$, $v_Q = 9u$ (towards wall)</div>
<div class="step"><div class="step-title">Collision 2: Q→Wall</div>
Q rebounds at $9eu$ (away from wall)</div>
<div class="step"><div class="step-title">Collision 3: Q→P (Q stops)</div>
Use this constraint to find $e$.
<div class="answer">(i) $e = \\frac{2}{7}$ ✓<br>(ii) Final $v_P = ?u$<br>(iii) Total K.E. loss = $?mu^2$</div></div>`,
gen:`<div class="step">Multi-collision problems: track each collision in sequence, output of one is input to next.</div>`}
]},

'6d': {
    title: 'Exercise 6.D — Harder Examples',
    formulas: `<p>Strategy for harder problems:</p>
<ul style="margin-left:20px;">
<li>Draw clear before/after diagrams</li>
<li>Identify parallel vs perpendicular components</li>
<li>For angles: use $\\tan B = e \\tan A$</li>
<li>For proofs: keep variables general, simplify at end</li>
</ul>`,
    questions: [
{n:1, q:`A smooth sphere collides obliquely with an equal sphere, which is at rest. Before the impact, the line of motion of the first sphere makes an angle $A$ with their line of centres; afterwards this angle is $B$. The coefficient of restitution between the spheres is $\\frac{1}{4}$. Show that $8\\tan A = 3\\tan B$.`,
sub:`<div class="step"><div class="step-title">Setup</div>
Let incoming sphere have velocity $u$ at angle $A$ to line of centres.<br>
Components: $u\\cos A$ (along) and $u\\sin A$ (perpendicular)</div>
<div class="step"><div class="step-title">After collision</div>
Perpendicular unchanged: $u\\sin A = v\\sin B$<br>
Along line: apply equal mass collision with $e = \\frac{1}{4}$<br>
First sphere: $v\\cos B = \\frac{1-e}{2}u\\cos A = \\frac{3}{8}u\\cos A$</div>
<div class="step"><div class="step-title">Divide</div>
$\\frac{u\\sin A}{\\frac{3}{8}u\\cos A} = \\frac{v\\sin B}{v\\cos B}$<br>
$\\frac{8\\tan A}{3} = \\tan B$
<div class="answer">$8\\tan A = 3\\tan B$ ✓</div></div>`,
gen:`<div class="step">General result for equal masses hitting stationary equal mass at angle.</div>`},

{n:2, q:`Two smooth spheres of mass $m$ and $2m$ collide obliquely, as shown (Fig. 6.21). Before they collide, they move towards one another, one moving with speed $u$ along the $\\vec{i}$-axis, the other moving with speed $2u$ at an angle $A$ to the $\\vec{i}$-axis, which is the line of centres at impact. The lighter mass is brought to rest by the impact. The coefficient of restitution is $\\frac{5}{118}$. (i) Prove that $\\cos A = \\frac{9}{41}$. (ii) Show that the velocity of the greater mass after impact is $\\frac{5u}{82}(-\\vec{i}+32\\vec{j})$ m/s.`,
sub:`<div class="step"><div class="step-title">Setup</div>
$m$: velocity $u\\vec{i}$<br>
$2m$: velocity $-2u\\cos A\\vec{i} + 2u\\sin A\\vec{j}$</div>
<div class="step"><div class="step-title">Constraint: $m$ stops</div>
$v_1 = 0$ (in $\\vec{i}$)<br>
$\\vec{j}$ unchanged for $m$: but $m$ has no $\\vec{j}$ initially, so stays 0.<br>
Use momentum and NLR to solve.
<div class="answer">(i) $\\cos A = \\frac{9}{41}$ ✓<br>(ii) $\\vec{v}_{2m} = \\frac{5u}{82}(-\\vec{i}+32\\vec{j})$ ✓</div></div>`,
gen:`<div class="step">Constraint (lighter stops) determines the angle.</div>`},

{n:3, q:`(i) A sphere of mass $m$ is moving with speed $4u$ when it impinges directly with an equal sphere which is moving in the same direction with speed $2u$. Show that the loss in kinetic energy due to the impact is $mu^2(1-e^2)$.<br>(ii) If the second sphere had been at rest and the first sphere impinged with speed $4u$ obliquely, at an angle of 30° to the line of centres at impact, show that the loss in kinetic energy would be $3mu^2(1-e^2)$.`,
sub:`<div class="step"><div class="step-title">Part (i) Direct collision</div>
$\\Delta KE = \\frac{m \\cdot m}{2(2m)}(4u-2u)^2(1-e^2)$<br>
$= \\frac{m}{4}(4u^2)(1-e^2) = mu^2(1-e^2)$ ✓</div>
<div class="step"><div class="step-title">Part (ii) Oblique at 30°</div>
Only component along line of centres counts.<br>
$u_{\\text{along}} = 4u\\cos 30° = 2\\sqrt{3}u$<br>
$\\Delta KE = \\frac{m}{4}(2\\sqrt{3}u)^2(1-e^2) = 3mu^2(1-e^2)$ ✓</div>`,
gen:`<div class="step">The $(1-e^2)$ factor always appears in K.E. loss!</div>`},

{n:4, q:`A smooth sphere $A$ impinges obliquely with an identical smooth sphere $B$, which is at rest. The direction of $A$ before and after impact makes angles 60° and $\\theta$, respectively, with the line of centres at impact. The coefficient of restitution is $e$. (i) Prove that $\\tan\\theta = \\frac{2\\sqrt{3}}{1-e}$. (ii) Show that if $e = 0$, then the percentage loss of kinetic energy is 12.5%. (iii) For what value of $e$ will the kinetic energies of $A$ and $B$ after impact be in the ratio 7:1?`,
sub:`<div class="step"><div class="step-title">Part (i)</div>
Perpendicular: $u\\sin 60° = v\\sin\\theta$<br>
Along: $v\\cos\\theta = \\frac{1-e}{2}u\\cos 60° = \\frac{(1-e)u}{4}$<br>
$\\tan\\theta = \\frac{u\\sin 60°}{\\frac{(1-e)u}{4}} = \\frac{4 \\cdot \\frac{\\sqrt{3}}{2}}{1-e} = \\frac{2\\sqrt{3}}{1-e}$ ✓</div>
<div class="step"><div class="step-title">Part (ii) and (iii)</div>
<div class="answer">(ii) When $e=0$: 12.5% loss ✓<br>(iii) Solve for $e$ when K.E. ratio is 7:1</div></div>`,
gen:`<div class="step">Classic angle relationship problem.</div>`},

{n:5, q:`A smooth sphere $A$ of mass $m$, moving with speed 0.6 m/s, impinges at an angle $\\theta$ on a smooth sphere $B$ of mass $2m$, which is at rest. After the collision $A$ is found to move with speed 0.2 m/s in a direction which is at right angles to its original direction. (i) Show that $\\tan\\theta = \\frac{1}{3}$. (ii) Find the coefficient of restitution. (iii) Show that the loss in kinetic energy is $0.06m$.`,
sub:`<div class="step"><div class="step-title">90° deflection constraint</div>
A's perpendicular component unchanged: $0.6\\sin\\theta = 0.2$<br>
$\\sin\\theta = \\frac{1}{3}$, so $\\tan\\theta = \\frac{1}{3}$ ✓<br>
A's parallel component goes to 0.</div>
<div class="step"><div class="step-title">Find $e$</div>
Use momentum and NLR for the parallel component.
<div class="answer">(ii) $e = ?$<br>(iii) Loss = $0.06m$ ✓</div></div>`,
gen:`<div class="step">Right-angle deflection is a powerful constraint.</div>`},

{n:6, q:`(a) Two vectors $a\\vec{i}+b\\vec{j}$ and $c\\vec{i}+d\\vec{j}$ are at right angles. Write down the condition satisfied by $a, b, c$ and $d$.<br>(b) Two smooth spheres of masses $m$ and $2m$ and speeds $u$ and $v$, respectively, collide as shown on the diagram (Fig. 6.22), where $\\cos\\theta = \\frac{3}{7}$. The sphere of mass $2m$ is deflected through an angle of 90° by the collision. The coefficient of restitution is $\\frac{3}{4}$. Prove that $v = \\frac{7u}{25}$.`,
sub:`<div class="step"><div class="step-title">Part (a)</div>
$ac + bd = 0$ (dot product = 0)</div>
<div class="step"><div class="step-title">Part (b)</div>
$2m$ deflected 90° means its final velocity has no component along its original direction of approach.
<div class="answer">$v = \\frac{7u}{25}$ ✓</div></div>`,
gen:`<div class="step">Perpendicular constraint: $\\vec{v}_1 \\cdot \\vec{v}_2 = 0$ means $ac + bd = 0$.</div>`},

{n:7, q:`Two spheres of radius $r$ move horizontally in opposite directions. The first has mass $2m$ and speed $2u$, the second has mass $m$ and speed $4u$. The coefficient of restitution is $\\frac{1}{\\sqrt{3}}$. The centres of the two spheres lie on two parallel lines, a distance $r$ apart. (i) Show that at the moment of impact, the line of centres of the spheres makes an angle of 30° with their previous lines of motion. (ii) Find the speeds of the spheres after impact in terms of $u$.`,
sub:`<div class="step"><div class="step-title">Geometry</div>
Centres distance $r$ apart, radii $r$ each.<br>
At impact, centres are $2r$ apart.<br>
$\\sin\\alpha = \\frac{r}{2r} = \\frac{1}{2}$, so $\\alpha = 30°$ ✓</div>
<div class="step"><div class="step-title">Collision</div>
Resolve velocities along and perpendicular to line of centres.
<div class="answer">(ii) Speeds in terms of $u$</div></div>`,
gen:`<div class="step">Geometry determines impact angle, then standard oblique collision.</div>`},

{n:8, q:`Two equal spheres, each of mass $m$ and radius $r$, collide when moving on a smooth horizontal plane. Before impact, the spheres are moving with speeds $u$ and $2u$, their centres moving along parallel lines, which are a distance $1.2r$ apart. The coefficient of restitution is 0.5. Show that (i) their speeds after impact are $\\frac{\\sqrt{61}}{5}u$ and $\\frac{\\sqrt{58}}{5}u$. (ii) the angle between their paths will be approximately 27° after impact.`,
sub:`<div class="step"><div class="step-title">Impact geometry</div>
Centres 1.2r apart on parallel lines.<br>
At impact, distance = 2r.<br>
$\\sin\\alpha = \\frac{1.2r}{2r} = 0.6$, $\\cos\\alpha = 0.8$</div>
<div class="step"><div class="step-title">Resolve and solve</div>
Complex calculation involving oblique collision.
<div class="answer">(i) Speeds: $\\frac{\\sqrt{61}}{5}u$ and $\\frac{\\sqrt{58}}{5}u$ ✓<br>(ii) Angle ≈ 27° ✓</div></div>`,
gen:`<div class="step">Geometry + oblique collision = challenging but systematic.</div>`}
]},

'6e': {
    title: 'Exercise 6.E — Projectiles Which Bounce',
    formulas: `<p>For projectile hitting horizontal ground with velocity $p\\vec{i} - q\\vec{j}$:</p>
<ul style="margin-left:20px;">
<li><b>Take-off velocity:</b> $p\\vec{i} + eq\\vec{j}$</li>
<li><b>For vertical wall:</b> $-ep\\vec{i} + q\\vec{j}$</li>
<li>Combine projectile motion with bounce mechanics</li>
</ul>`,
    questions: [
{n:1, q:`A particle is fired horizontally with a speed of 4 m/s from a point 4.9 m above a horizontal smooth floor. The coefficient of restitution between the ball and the floor is $\\frac{1}{2}$. (i) Find the horizontal distance travelled before the first bounce. (ii) Find the total horizontal distance travelled before the second bounce.`,
sub:`<div class="step"><div class="step-title">First flight</div>
Time to fall 4.9 m: $4.9 = \\frac{1}{2}(9.8)t^2$, so $t = 1$ s<br>
Horizontal: $4 \\times 1 = 4$ m<br>
Landing velocity: $4\\vec{i} - 9.8\\vec{j}$</div>
<div class="step"><div class="step-title">After bounce</div>
Take-off: $4\\vec{i} + 4.9\\vec{j}$<br>
Time in air: $t = \\frac{2(4.9)}{9.8} = 1$ s<br>
Distance: 4 m
<div class="answer">(i) 4 m<br>(ii) 4 + 4 = 8 m</div></div>`,
gen:`<div class="step">Pattern: horizontal unchanged, vertical multiplied by $e$.</div>`},

{n:2, q:`A particle is fired from a point $P$ on a horizontal floor with velocity $10\\vec{i} + 4.9\\vec{j}$ m/s from a point 5 m from a smooth vertical wall. (i) Prove that it hits the wall horizontally. (ii) Find the height $h$ of the point of impact above ground level. (iii) If $e = \\frac{1}{5}$, how far from $P$ does it land?`,
sub:`<div class="step"><div class="step-title">Time to wall</div>
$t = \\frac{5}{10} = 0.5$ s<br>
$v_y = 4.9 - 9.8(0.5) = 0$ → hits horizontally ✓</div>
<div class="step"><div class="step-title">Height and rebound</div>
$h = 4.9(0.5) - 4.9(0.25) = 1.225$ m<br>
Rebounds at $-2\\vec{i}$ (horizontal), falls from $h$.
<div class="answer">(ii) $h = 1.225$ m<br>(iii) Landing distance from $P$</div></div>`,
gen:`<div class="step">Projectile + wall bounce + projectile.</div>`},

{n:3, q:`A ball is projected horizontally from a point $q$ above a smooth horizontal plane with speed 2 m/s. The ball first hits the plane at a point whose horizontal displacement from $q$ is 0.4 m. The ball next strikes the plane at a horizontal displacement of 1 m from $q$. The coefficient of restitution between the ball and the plane is $e$. Find the value of $e$.`,
sub:`<div class="step"><div class="step-title">First flight</div>
Horizontal 0.4 m at 2 m/s: time = 0.2 s<br>
Height: $h = \\frac{1}{2}(10)(0.04) = 0.2$ m<br>
Landing $v_y = 2$ m/s</div>
<div class="step"><div class="step-title">Second flight</div>
Take-off: $2\\vec{i} + 2e\\vec{j}$<br>
Range: 0.6 m (from 0.4 to 1.0)<br>
Use range formula to find $e$.
<div class="answer">$e = ?$</div></div>`,
gen:`<div class="step">Range between bounces determines $e$.</div>`},

{n:4, q:`A ball is projected with speed $u$ at an angle $\\alpha$ to horizontal ground and at a distance $d$ from a smooth vertical wall. The ball strikes the wall and rebounds and returns to the point of projection $P$. The coefficient of restitution between the ball and the wall is $e$. (i) Prove that the time taken to reach the wall is $\\frac{d}{u\\cos\\alpha}$. (ii) Show that the velocity of the ball on hitting the wall is $(u\\cos\\alpha)\\vec{i} + \\left(\\frac{u^2\\sin\\alpha\\cos\\alpha - gd}{u\\cos\\alpha}\\right)\\vec{j}$. (iii) Prove $u^2\\sin 2\\alpha = gd(1 + \\frac{1}{e})$. (iv) If $u = \\sqrt{6gd}$ and $\\alpha = 15°$, find $e$.`,
sub:`<div class="step"><div class="step-title">Part (i)</div>
Horizontal velocity = $u\\cos\\alpha$<br>
Time = distance/speed = $\\frac{d}{u\\cos\\alpha}$ ✓</div>
<div class="step"><div class="step-title">Parts (ii)-(iv)</div>
Apply projectile motion and wall bounce.
<div class="answer">(iii) ✓<br>(iv) $e = ?$</div></div>`,
gen:`<div class="step">Symmetric return requires specific relationship between $u$, $\\alpha$, $d$, $e$.</div>`},

{n:5, q:`A particle starts from rest and slides down a smooth plane of length $l$ and inclination $\\alpha$. It then strikes a horizontal plane at speed. If the coefficient of restitution between the particle and the plane is $e$, show that the range $R$ on the first rebound is given by $R = 2el\\sin\\alpha\\sin 2\\alpha$. Find the value of $e$ if $\\alpha = 30°$ and $R = \\frac{1}{2}l$.`,
sub:`<div class="step"><div class="step-title">Speed at bottom</div>
$v^2 = 2gl\\sin\\alpha$, so $v = \\sqrt{2gl\\sin\\alpha}$<br>
Direction: at angle $\\alpha$ below horizontal</div>
<div class="step"><div class="step-title">Bounce and range</div>
Velocity after bounce: horizontal unchanged, vertical multiplied by $e$.<br>
$R = \\frac{v^2\\sin 2\\alpha \\cdot e}{g}$ (modified range formula)
<div class="answer">$R = 2el\\sin\\alpha\\sin 2\\alpha$ ✓<br>For $\\alpha = 30°$, $R = \\frac{l}{2}$: $e = ?$</div></div>`,
gen:`<div class="step">Energy approach for speed, then projectile with modified vertical.</div>`},

{n:6, q:`A particle is projected horizontally with speed $u$ for a point $P$ which is a height $h$ above a horizontal floor and a distance $d$ from a smooth vertical wall. The ball hits the wall and rebounds, the coefficient of restitution being $e$. (i) Prove that the time taken to reach the wall is $\\frac{d}{u}$. (ii) Show that the time to hit the wall is $\\frac{d}{u}$. (iii) Prove that the ball strikes the wall at a distance $R$ from the wall where $R = eu\\sqrt{\\frac{2h}{g}} - ed$.`,
sub:`<div class="step"><div class="step-title">Analysis</div>
Time to wall: $t_1 = \\frac{d}{u}$<br>
At wall: $v_y = gt_1 = \\frac{gd}{u}$ (downward)<br>
After bounce: $v_x = -eu$, $v_y$ continues</div>
<div class="step"><div class="step-title">Landing position</div>
Time from wall to floor, then horizontal distance.
<div class="answer">(iii) $R = eu\\sqrt{\\frac{2h}{g}} - ed$ ✓</div></div>`,
gen:`<div class="step">Track horizontal and vertical motions separately through bounce.</div>`},

{n:7, q:`A ball is fired from horizontal ground with speed 19.6 m/s at an angle of 45° to the ground. It strikes a smooth wall 9.8 m away and rebounds to the original point of projection. (i) Show that it strikes the wall at a height 7.35 m. (ii) Find the coefficient of restitution between the ball and the wall.`,
sub:`<div class="step"><div class="step-title">Time to wall</div>
$v_x = 19.6\\cos 45° = 9.8\\sqrt{2}$ m/s<br>
$t = \\frac{9.8}{9.8\\sqrt{2}} = \\frac{1}{\\sqrt{2}}$ s</div>
<div class="step"><div class="step-title">Height at wall</div>
$h = 9.8\\sqrt{2} \\cdot \\frac{1}{\\sqrt{2}} \\cdot t - \\frac{1}{2}(9.8)t^2$<br>
Calculate for $t = \\frac{1}{\\sqrt{2}}$
<div class="answer">(i) $h = 7.35$ m ✓<br>(ii) $e = ?$ (from return condition)</div></div>`,
gen:`<div class="step">Return to origin is the key constraint.</div>`},

{n:8, q:`A ball is projected from smooth horizontal ground at a point $P$. It strikes a smooth vertical wall at $R$. The ball then rebounds and strikes the plane at $Q$. It then bounces for a second time. If the coefficient of restitution between the ball and both surfaces is $\\frac{1}{2}$, prove that the ball lands at $P$ on bouncing for the second time.`,
sub:`<div class="step"><div class="step-title">Track the journey</div>
P → R (wall) → Q (floor) → ? (second floor bounce)<br>
Each bounce modifies the relevant velocity component.</div>
<div class="step"><div class="step-title">Symmetry argument</div>
With $e = \\frac{1}{2}$ for both surfaces, the geometry works out.
<div class="answer">Returns to $P$ ✓</div></div>`,
gen:`<div class="step">Multiple bounces require careful tracking of velocity components.</div>`}
]},

'6f': {
    title: 'Exercise 6.F — Revision',
    formulas: `<p>All the key formulas:</p>
<ul style="margin-left:20px;">
<li><b>Impulse:</b> $\\vec{I} = m\\vec{v} - m\\vec{u}$</li>
<li><b>Momentum:</b> $m_1u_1 + m_2u_2 = m_1v_1 + m_2v_2$</li>
<li><b>NLR:</b> $\\frac{v_1-v_2}{u_1-u_2} = -e$</li>
<li><b>K.E. lost:</b> Factor of $(1-e^2)$</li>
<li><b>Oblique:</b> Perpendicular bounces, parallel unchanged</li>
</ul>`,
    questions: [
{n:1, q:`A smooth sphere $P$, of mass 2 kg, moving with a speed of 3 m/s collides directly with a smooth sphere $Q$, of mass 3 kg, moving in the opposite direction with a speed of 1 m/s on a smooth horizontal table. The coefficient of restitution for the collision is $e$. As a result of the collision, sphere $P$ is brought to rest. (i) Find the speed of $Q$ after the collision. (ii) Find the value of $e$. (iii) Find the fraction of kinetic energy lost due to the collision.`,
sub:`<div class="step"><div class="step-title">Setup</div>
$P$: 2 kg at 3 m/s → 0 m/s<br>
$Q$: 3 kg at -1 m/s → $v$ m/s</div>
<div class="step"><div class="step-title">Momentum</div>
$2(3) + 3(-1) = 2(0) + 3v$<br>
$3 = 3v$, so $v = 1$ m/s
<div class="answer">(i) Speed of Q = 1 m/s</div></div>
<div class="step"><div class="step-title">Find $e$</div>
$\\frac{0-1}{3-(-1)} = -e$<br>
$e = \\frac{1}{4}$
<div class="answer">(ii) $e = \\frac{1}{4}$</div></div>
<div class="step"><div class="step-title">K.E. loss</div>
Before: $\\frac{1}{2}(2)(9) + \\frac{1}{2}(3)(1) = 10.5$ J<br>
After: $\\frac{1}{2}(3)(1) = 1.5$ J
<div class="answer">(iii) Fraction lost = $\\frac{9}{10.5} = \\frac{6}{7}$</div></div>`,
gen:`<div class="step">Constraint ($P$ stops) determines the solution.</div>`},

{n:2, q:`A smooth sphere $P$, of mass 2 kg, moving with a speed of 6 m/s collides directly with a smooth sphere $Q$, of mass 4 kg, moving in the same direction with a speed of 4 m/s on a smooth horizontal table. The coefficient of restitution for the collision is 0.5. (i) Find the speed of $P$ and the speed of $Q$ after the collision. (ii) Find the loss in kinetic energy due to the collision.`,
sub:`<div class="step"><div class="step-title">Setup</div>
$P$: 2 kg at 6 m/s, $Q$: 4 kg at 4 m/s (same direction)</div>
<div class="step"><div class="step-title">Solve</div>
Momentum: $12 + 16 = 2v_1 + 4v_2 = 28$<br>
NLR: $\\frac{v_1-v_2}{6-4} = -0.5$, so $v_1 - v_2 = -1$<br>
$v_1 = \\frac{26}{6} = 4.33$ m/s, $v_2 = 5.33$ m/s
<div class="answer">(i) $P$: 4.33 m/s, $Q$: 5.33 m/s<br>(ii) K.E. loss = 1 J</div></div>`,
gen:`<div class="step">Standard direct collision.</div>`},

{n:3, q:`James and Karen live next door to one another. There is a wall between their horizontal gardens. Karen throws a ball vertically upwards from ground level with speed 19.6 m/s. James can see the ball only when it is 8.575 metres or more above ground level. (i) Find the length of time for which James will be able to see the ball on its first flight up and down. (ii) If the coefficient of restitution of the ball is $\\frac{1}{2}$, investigate if James will see the ball after its first bounce.`,
sub:`<div class="step"><div class="step-title">Part (i)</div>
$s = ut - \\frac{1}{2}gt^2$<br>
$8.575 = 19.6t - 4.9t^2$<br>
Solve for $t$: ball above 8.575 m between two times.
<div class="answer">(i) Time visible = ? s</div></div>
<div class="step"><div class="step-title">Part (ii)</div>
Max height after bounce = $e^2 \\times 19.6$ m = $\\frac{1}{4} \\times 19.6 = 4.9$ m<br>
This is less than 8.575 m.
<div class="answer">(ii) No, James won't see it (max height 4.9 m < 8.575 m)</div></div>`,
gen:`<div class="step">Kinematics for visibility, then bounce height formula.</div>`},

{n:4, q:`(a) State whether or not these statements are necessarily true for ALL oblique collisions: (i) If $e = 0$, then all kinetic energy is lost. (ii) If $e = 1$, then no kinetic energy is lost. (iii) If $e = 0.5$, then a half of the kinetic energy is lost.<br>(b) A small smooth sphere collides obliquely with an identical sphere, which is at rest. Both spheres are perfectly elastic (i.e. $e = 1$). Show that the paths of the two spheres after collision will be at right angles and verify mathematically that there is no loss in kinetic energy.`,
sub:`<div class="step"><div class="step-title">Part (a)</div>
(i) FALSE for oblique — only energy along line of centres is affected<br>
(ii) TRUE — $e = 1$ means elastic, no K.E. loss in collision<br>
(iii) FALSE — K.E. lost is $(1-e^2) = 0.75$ of the energy along line of centres</div>
<div class="step"><div class="step-title">Part (b)</div>
For equal masses with $e = 1$: first ball keeps perpendicular component, loses all parallel. Second ball takes parallel component.<br>
$\\vec{v}_1 \\cdot \\vec{v}_2 = 0$ ✓ (perpendicular)<br>
K.E. conserved ✓
<div class="answer">(b) Right angles ✓, No K.E. loss ✓</div></div>`,
gen:`<div class="step">Oblique collisions: only the component along line of centres is affected by $e$.</div>`},

{n:5, q:`Two smooth spheres $P$ and $Q$ of masses $2m$ and $m$, respectively, collide obliquely. The coefficient of restitution is 0.5. The velocity of $P$ before impact is $2v\\vec{i}+5v\\vec{j}$ and the velocity of $Q$ before impact is $-4v\\vec{i}+3v\\vec{j}$ where $\\vec{i}$ points along the line of centres at impact. (i) Find the velocities of the spheres after impact. (ii) Show that the loss in kinetic energy is $9mv^2$. (iii) Conduct a dimensional analysis on the expression $9kv^2$ and state your conclusion.`,
sub:`<div class="step"><div class="step-title">$\\vec{j}$ unchanged</div>
$P$: $5v\\vec{j}$, $Q$: $3v\\vec{j}$</div>
<div class="step"><div class="step-title">$\\vec{i}$ collision</div>
Momentum: $4mv - 4mv = 2mv_1 + mv_2 = 0$, so $2v_1 + v_2 = 0$<br>
NLR: $\\frac{v_1-v_2}{2v-(-4v)} = -0.5$, so $v_1 - v_2 = -3v$<br>
$v_1 = -v$, $v_2 = 2v$
<div class="answer">(i) $P$: $-v\\vec{i}+5v\\vec{j}$, $Q$: $2v\\vec{i}+3v\\vec{j}$<br>(ii) K.E. loss = $9mv^2$ ✓<br>(iii) $[kv^2] = kg \\cdot (m/s)^2 = J$ ✓ (energy)</div></div>`,
gen:`<div class="step">Standard oblique collision with dimensional analysis check.</div>`},

{n:6, q:`(a) State the laws governing direct collisions.<br>(b) A smooth sphere $P$ (of mass $m$), moving with speed $4u$, collides directly with an identical sphere $Q$ which is moving in the same direction with speed $2u$. The coefficient of restitution is $e$. Find in terms of $u$, $e$ and $m$: (i) The speeds of the spheres after impact. (ii) The loss in kinetic energy. (iii) The magnitude of the impulse imparted to each sphere by the collision.`,
sub:`<div class="step"><div class="step-title">Laws</div>
1. Momentum conserved: $m_1u_1 + m_2u_2 = m_1v_1 + m_2v_2$<br>
2. NLR: $\\frac{v_1-v_2}{u_1-u_2} = -e$</div>
<div class="step"><div class="step-title">Solution</div>
Momentum: $6mu = m(v_1 + v_2)$, so $v_1 + v_2 = 6u$<br>
NLR: $v_1 - v_2 = -2eu$<br>
$v_1 = (3-e)u$, $v_2 = (3+e)u$
<div class="answer">(i) $v_P = (3-e)u$, $v_Q = (3+e)u$<br>(ii) $\\Delta KE = mu^2(1-e^2)$<br>(iii) $I = mu(1+e)$</div></div>`,
gen:`<div class="step">General solution in terms of $e$ — the pattern is clear!</div>`},

{n:7, q:`A smooth sphere of mass $m$ moving with speed $u$ collides obliquely with a second smooth sphere, which is at rest. The direction of motion of the moving sphere is inclined at an angle 45° to the line of centres at impact. The coefficient of restitution is $\\frac{1}{2}$. After impact the two spheres are travelling at right angles to each other. (i) Find the mass of the second sphere in terms of $m$. (ii) Find the velocities of the two spheres after impact in terms of $u$.`,
sub:`<div class="step"><div class="step-title">Setup</div>
$m$ at speed $u$, 45° to line of centres → components $\\frac{u}{\\sqrt{2}}$ each<br>
Second sphere mass $M$, at rest</div>
<div class="step"><div class="step-title">Right angles constraint</div>
$\\vec{v}_1 \\cdot \\vec{v}_2 = 0$<br>
Combined with momentum and NLR determines $M$.
<div class="answer">(i) $M = ?m$<br>(ii) Velocities in terms of $u$</div></div>`,
gen:`<div class="step">Perpendicular final paths is the key constraint.</div>`},

{n:8, q:`Two equal smooth spheres ($P$ and $Q$) of mass $m$ collide obliquely. Before impact, $Q$ is at rest and the direction of motion of the moving sphere $P$ is inclined at 30° to the line of centres at impact. The coefficient of restitution between the spheres is $e$. Show that the loss in kinetic energy due to the collision is $3mu^2(1-e^2)$, where $u$ is the speed of $P$ before the collision.`,
sub:`<div class="step"><div class="step-title">Components</div>
$P$: $u\\cos 30° = \\frac{\\sqrt{3}u}{2}$ along, $u\\sin 30° = \\frac{u}{2}$ perpendicular</div>
<div class="step"><div class="step-title">K.E. loss</div>
Only the component along line of centres contributes.<br>
$\\Delta KE = \\frac{m \\cdot m}{2(2m)}\\left(\\frac{\\sqrt{3}u}{2}\\right)^2(1-e^2)$<br>
$= \\frac{m}{4} \\cdot \\frac{3u^2}{4}(1-e^2) = \\frac{3mu^2}{16}(1-e^2)$<br>
Wait, let me recalculate...
<div class="answer">Loss = $\\frac{3mu^2}{4}(1-e^2)$... check the question says $3mu^2(1-e^2)$</div></div>`,
gen:`<div class="step">Only the parallel component (along line of centres) loses energy.</div>`}
]}
};

// Build exercise sections
function buildExercise(id) {
    const ex = exercises[id];
    if (!ex) return;
    
    const section = document.getElementById('sec-' + id);
    section.innerHTML = `
        <div class="ex-header"><h2>${ex.title}</h2></div>
        <div class="ex-body">
            <button class="formula-toggle-btn" onclick="toggleFormulas('${id}')">
                <span class="arrow">▶</span> Show General Formulas
            </button>
            <div class="general-box" id="formulas-${id}">
                <h3>General Formulas</h3>
                ${ex.formulas}
            </div>
            <div class="q-nav" id="nav-${id}"></div>
            <div id="qs-${id}"></div>
        </div>
    `;
    
    const nav = document.getElementById('nav-' + id);
    const container = document.getElementById('qs-' + id);
    
    ex.questions.forEach((q, i) => {
        const btn = document.createElement('button');
        btn.className = 'q-btn' + (i === 0 ? ' active' : '');
        btn.textContent = q.n;
        btn.onclick = () => showQ(id, i);
        nav.appendChild(btn);
        
        const slide = document.createElement('div');
        slide.className = 'q-slide' + (i === 0 ? ' active' : '');
        slide.id = `q-${id}-${i}`;
        slide.innerHTML = `
            <div class="q-box"><span class="q-num">${q.n}</span>${q.q}</div>
            <div class="method-tabs">
                <button class="method-tab sub" onclick="showMethod('${id}',${i},'sub')">Sub First</button>
                <button class="method-tab gen" onclick="showMethod('${id}',${i},'gen')">General Formula</button>
            </div>
            <div class="solution sub-sol" id="sub-${id}-${i}"><div class="sol-title">Substitute & Calculate</div>${q.sub || 'Solution to follow'}</div>
            <div class="solution gen-sol" id="gen-${id}-${i}"><div class="sol-title">Using General Formulas</div>${q.gen || 'General approach to follow'}</div>
        `;
        container.appendChild(slide);
    });
}

function toggleFormulas(id) {
    const box = document.getElementById('formulas-' + id);
    const btn = box.previousElementSibling;
    box.classList.toggle('show');
    btn.classList.toggle('open');
    btn.innerHTML = box.classList.contains('show') 
        ? '<span class="arrow">▼</span> Hide General Formulas'
        : '<span class="arrow">▶</span> Show General Formulas';
    rerender();
}

function showSection(id) {
    document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.getElementById('sec-' + id).classList.add('active');
    event.target.classList.add('active');
    rerender();
}

function showQ(ex, i) {
    document.querySelectorAll(`#nav-${ex} .q-btn`).forEach((b, j) => b.classList.toggle('active', i === j));
    document.querySelectorAll(`#qs-${ex} .q-slide`).forEach((s, j) => s.classList.toggle('active', i === j));
    rerender();
}

function showMethod(ex, i, method) {
    const subEl = document.getElementById(`sub-${ex}-${i}`);
    const genEl = document.getElementById(`gen-${ex}-${i}`);
    const slide = document.getElementById(`q-${ex}-${i}`);
    const tabs = slide.querySelectorAll('.method-tab');
    
    tabs.forEach(t => t.classList.remove('active'));
    subEl.classList.remove('show');
    genEl.classList.remove('show');
    
    if (method === 'sub') { tabs[0].classList.add('active'); subEl.classList.add('show'); }
    else { tabs[1].classList.add('active'); genEl.classList.add('show'); }
    rerender();
}

function rerender() {
    if (typeof renderMathInElement !== 'undefined') {
        renderMathInElement(document.body, {
            delimiters: [{left: '$$', right: '$$', display: true}, {left: '$', right: '$', display: false}]
        });
    }
}

document.addEventListener('DOMContentLoaded', () => {
    ['6a','6b','6c','6d','6e','6f'].forEach(buildExercise);
    
    setTimeout(() => {
        const ctx = document.getElementById('graph1')?.getContext('2d');
        if (ctx) {
            const e = Array.from({length: 21}, (_, i) => i * 0.05);
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: e.map(x => x.toFixed(2)),
                    datasets: [
                        {label: 'v/u = e', data: e, borderColor: '#3b82f6', fill: false},
                        {label: 'K.E. kept = e²', data: e.map(x => x*x), borderColor: '#22c55e', fill: false},
                        {label: 'K.E. lost = 1−e²', data: e.map(x => 1-x*x), borderColor: '#ef4444', fill: false}
                    ]
                },
                options: {responsive: true, maintainAspectRatio: false}
            });
        }
    }, 500);
    
    rerender();
});
</script>
</body>
</html>
